<li>
  <h3><%= link_to "Provider", '', :class => "facet-section icon-arrow-7", :rel => "nofollow" %></h3>
  <ul>
    <li>
      <h4>
        <%= radio_button_tag "facets[provider]", "ugc", controller.controller_name == 'contributions' %>
        <%= link_to "1914-1918", request.parameters.merge(:page => 1, :controller => 'contributions', :facets => {}) %>
      </h4
    </li>
    <li>
      <h4>
        <%= radio_button_tag "facets[provider]", "europeana", controller.controller_name == 'europeana' %>
        <%= link_to "Europeana portal", request.parameters.merge(:page => 1, :controller => 'europeana', :facets => {}) %>
      </h4>
    </li>
  </ul>
</li>

<% unless facets.blank? -%>

  <%- for facet in facets %>
  
    <%- if facet.rows.present? -%>
      <li>
        <h3><%= link_to facet_label(facet.name), '', :class => "facet-section icon-arrow-7", :rel => "nofollow" %></h3>
        <ul>
          <%- for field in facet.rows -%>
            <li>
              <h4>
                  <%= check_box_tag "facets[#{facet.name}][#{field.value}]" %>
                  <%= link_to field.value.is_a?(Integer) ? TaxonomyTerm.find(field.value).term : field.value, request.query_parameters.merge(:page => 1, :facets => (request.query_parameters[:facets] || {}).merge({ facet.name => field.value })) %> (<%= field.count %>)
              </h4>
            </li>
          <%- end -%>
        </ul>
      </li>
    <%- end -%>
  
  <%- end -%>
  
<% end -%>
