<%= will_paginate contributions %>
<table class="search-results">
  <caption><%= local_assigns[:query].present? ? t('views.contributions.search.caption.matching', :query => query) : t('views.contributions.search.caption.all') %></caption>
  <tr>
    <th scope="col"><%= t 'activerecord.attributes.attachment.preview' %></th>
    <th scope="col"><%= t 'attributes.title' %></th>
    <th scope="col"><%= t 'activerecord.attributes.contribution.contributor' %></th>
    <%- for field in listing_fields -%>
      <th scope="col"><%= field.title %></th>
    <%- end -%>
  </tr>
  <%- for contribution in contributions.each -%>
    <tr>
      <td>
        <%- if contribution.attachments.present? -%>
          <%= link_to attachment_preview(contribution.attachments.first), contribution, :title => t('views.contributions.search.links.show.title') %>
        <%- end -%>
      </td>
      <td><%= link_to contribution.title, contribution, :title => t('views.contributions.search.links.show.title') %></td>
      <td><%= contact_name(contribution.contact) %></td>
      <%- for field in listing_fields -%>
        <td><%= metadata_record_field_value(contribution.metadata, field) %></td>
      <%- end -%>
    </tr>
  <%- end -%>
</table>
<%= will_paginate contributions %>
