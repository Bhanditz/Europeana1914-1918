<%
cataloguing = false if local_assigns[:cataloguing].nil?
fields = nil if local_assigns[:fields].nil?
fields = metadata_record_fields(cataloguing, fields)
-%>
<% unless fields.blank? -%>
  <% fields.each do |field| %>
    <%- if field.field_type == 'date' %>
      <%- @javascripts[:datepicker] = true %>
      <%= form.input field.form_input_name, :label => field.title, :hint => metadata_field_hint(field), :as => :string, :input_html => { :class => 'datepicker' } %>
    <%- elsif field.field_type == 'geo' %>
      <%- @javascripts[:gmap_geo] = true %>
      <%= form.input field.form_input_name, :label => field.title, :hint => metadata_field_hint(field), :input_html => { :class => 'geo' } %>
    <%- elsif field.field_type == 'taxonomy' %>
      <%- if field.multi -%>
        <%= form.input field.form_input_name, :label => field.title, :hint => metadata_field_hint(field), :as => :check_boxes, :collection => metadata_field_taxonomy_terms(field), :required => field.required? %>
      <%- else -%>
        <%= form.input field.form_input_name, :label => field.title, :hint => metadata_field_hint(field), :as => :select, :collection => metadata_field_taxonomy_terms(field), :required => field.required? %>
      <%- end -%>
    <%- else %>
      <%= form.input field.form_input_name, :label => field.title, :hint => metadata_field_hint(field) %>
    <%- end %>
  <% end %>
<% end -%>
