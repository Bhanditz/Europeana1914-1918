<% fields = metadata_record_fields(local_assigns[:field_options] || {}) -%>
<% unless fields.blank? -%>
  <% fields.each do |field| %>
    <%- if field.field_type == 'date' %>
      <%= form.input field.form_input_name, :label => metadata_field_label(field, local_assigns[:type]), :hint => metadata_field_hint(field, local_assigns[:type]), :as => :string_date, :start_year => 1912, :end_year => 1923 %>
    <%- elsif field.field_type == 'geo' %>
      <%- @javascripts[:gmap_geo] = true %>
      <%= form.input field.form_input_name, :label => metadata_field_label(field, local_assigns[:type]), :hint => metadata_field_hint(field, local_assigns[:type]), :input_html => { :class => 'geo' } %>
    <%- elsif field.field_type == 'taxonomy' %>
      <%- if field.multi -%>
        <%= form.input field.form_input_name, :label => metadata_field_label(field, local_assigns[:type]), :hint => metadata_field_hint(field, local_assigns[:type]), :as => :check_boxes, :collection => metadata_field_taxonomy_terms(field), :member_label => :translated_term, :required => field.required? %>
      <%- else -%>
        <%= form.input field.form_input_name, :label => metadata_field_label(field, local_assigns[:type]), :hint => metadata_field_hint(field, local_assigns[:type]), :as => :select, :collection => metadata_field_taxonomy_terms(field), :member_label => :translated_term, :required => field.required?, :include_blank => true, :input_html => { :multiple => false } %>
      <%- end -%>
    <%- else %>
      <%= form.input field.form_input_name, :label => metadata_field_label(field, local_assigns[:type]), :hint => metadata_field_hint(field, local_assigns[:type]) %>
    <%- end %>
  <% end %>
<% end -%>
