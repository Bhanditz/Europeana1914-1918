<% 
  provide :title, 'Flickr photos' 
  provide :javascripts_page, 'flickr-select'
%>

<div class="section top">
  
  <h2><%= yield :title %></h2>

  <%= form_tag({ }, { :method => :get, :id => 'flickr_search' }) do |form| %>
    <div><%= text_field_tag 'q', @flickr_query %> <%= submit_tag 'Search' %></div>
  <% end %>

  <div id="flickr_license_info">
    <h3>Compatible licenses</h3>
    <p>Only photos with the following compatible licenses may be imported into Europeana 1914-1918:</p>
    <ul>
      <!--<li>Attribution License</li>-->
      <li>Attribution-ShareAlike License</li>
      <li>No known copyright restrictions</li>
    </ul>
  </div>

  <% if @photos.present? %>
    <%= form_tag({}, { :id => 'flickr_select' }) do |form| %>
      <ul>
        <% for photo in @photos %>
          <li>
            <%- if flickr_license_permitted?(photo) -%>
              <label for="flickr_ids_<%= photo.id %>"><%= image_tag FlickRaw.url_q(photo) %></label>
              <%= check_box_tag("flickr_ids[]", photo.id, false, :id => "flickr_ids_#{photo.id}") %>
            <%- else -%>
              <%= image_tag FlickRaw.url_q(photo) %>
              <p class="flickr_license_invalid">Incompatible license <a href="#flickr_license_info">?</a></p>
            <%- end -%>
          </li>
        <% end %>
      </ul>
      <div><%= submit_tag t('actions.submit') %></div>
    <% end %>
    
    <%= will_paginate @photos %>
  <% end %>

</div>
