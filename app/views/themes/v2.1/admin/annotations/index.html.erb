<%
  provide :title, t('views.admin.annotations.index.title')
%>
<div class="section top">

  <h2><%= yield :title %></h2>
  
  <%- if @annotations.present? -%>
    <table>
      <thead>
        <tr>
          <th scope="col"><%= t 'actions.created_at' %></th>
          <th scope="col"><%= t 'activerecord.models.user' %></th>
          <th scope="col"><%= t 'activerecord.models.contribution' %></th>
          <th scope="col"><%= t 'activerecord.models.attachment' %></th>
          <th scope="col"><%= t 'views.admin.annotations.table.header.text' %></th>
          <th scope="col"><%= t 'views.admin.annotations.table.header.type' %></th>
          <th scope="col">Status</th>
          <th scope="col"><%= t 'views.table.header.actions' %></th>
        </tr>
      </thead>
      <tbody>
        <%- for annotation in @annotations -%>
          <tr>
            <td><%= l annotation[:created_at], :format => :short %></td>
            <td><%= link_to annotation[:user_name], admin_user_path(annotation[:user]) %></td>
            <td><%= link_to truncate(annotation[:contribution].title, :length => 140, :separator => ' '), contribution_path(annotation[:contribution]) %></td>
            <td><%= link_to truncate(annotation[:attachment].title.present? ? annotation[:attachment].title : annotation[:attachment].id.to_s, :length => 140, :separator => ' '), contribution_attachment_path(annotation[:contribution], annotation[:attachment]) unless annotation[:attachment].blank? %></td>
            <td><%= truncate annotation[:text], :length => 140, :separator => ' ' %></td>
            <td><%= annotation[:type] %></td>
            <td><%= annotation[:status] %></td>
            <td><%= link_to t('actions.edit'), annotation[:edit], :class => 'edit-member' %></td>
          </tr>
        <%- end -%>
      </tbody>
    </table>
    
    <%= will_paginate @annotations %>
  <%- else -%>
    
  <%- end -%>

</div>
